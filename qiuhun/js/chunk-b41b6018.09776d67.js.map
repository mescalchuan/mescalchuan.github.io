{"version":3,"sources":["webpack:///./src/components/wechat/wechat.vue?66c5","webpack:///./src/components/wechat/wechat.vue?0d16","webpack:///./src/components/wechat/msg-item.vue?60f1","webpack:///src/components/wechat/msg-item.vue","webpack:///./src/components/wechat/msg-item.vue?b9f1","webpack:///./src/components/wechat/msg-item.vue","webpack:///src/components/wechat/wechat.vue","webpack:///./src/components/wechat/wechat.vue?bd0f","webpack:///./src/components/wechat/wechat.vue?b8ec"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_l","$store","state","msgList","baseMsgObj","key","mid","staticRenderFns","class","deleteMsg","directives","name","rawName","path","query","item","group_name","user","remark","nickname","group_num","length","nativeOn","$event","toggleMsgRead","value","read","quiet","expression","_v","_s","newMsgCount","type","userInfo","index","headerUrl","msg","date1","_f","date","text","on","deleteMsgEvent","component"],"mappings":"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","file":"js/chunk-b41b6018.09776d67.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wechat.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wechat.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wechat\"}},[_c('ul',{staticClass:\"wechat-list\"},_vm._l((_vm.$store.state.msgList.baseMsg),function(baseMsgObj){return _c('msg-item',{key:baseMsgObj.mid,staticClass:\"list-row line-bottom\",attrs:{\"item\":baseMsgObj}})}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{class:{'item-hide':_vm.deleteMsg}},[_c('router-link',{directives:[{name:\"swiper\",rawName:\"v-swiper\"}],staticClass:\"list-info\",attrs:{\"to\":{ path: '/wechat/dialogue', query: { mid: _vm.item.mid,name:_vm.item.group_name||(_vm.item.user[0].remark||_vm.item.user[0].nickname),group_num:_vm.item.user.length}},\"tag\":\"div\"},nativeOn:{\"click\":function($event){return _vm.toggleMsgRead($event,'enter')}}},[_c('div',{staticClass:\"header-box\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.read&&!_vm.item.quiet),expression:\"!read&&!item.quiet\"}],staticClass:\"new-msg-count\"},[_vm._v(_vm._s(_vm.item.newMsgCount))]),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.read&&_vm.item.quiet),expression:\"!read&&item.quiet\"}],staticClass:\"new-msg-dot\"}),_c('div',{staticClass:\"header\",class:[_vm.item.type=='group'?'multi-header':'']},_vm._l((_vm.item.user),function(userInfo,index){return _c('img',{key:index,attrs:{\"src\":userInfo.headerUrl}})}),0)]),_c('div',{staticClass:\"desc-box\"},[(_vm.item.msg[_vm.item.msg.length-1].date1)?_c('div',{staticClass:\"desc-time\"},[_vm._v(_vm._s(_vm.item.msg[_vm.item.msg.length-1].date1))]):_c('div',{staticClass:\"desc-time\"},[_vm._v(_vm._s(_vm._f(\"fmtDate\")(_vm.item.msg[_vm.item.msg.length-1].date,'hh:ss')))]),(_vm.item.type=='group')?_c('div',{staticClass:\"desc-author\"},[_vm._v(_vm._s(_vm.item.group_name))]):_c('div',{staticClass:\"desc-author\"},[_vm._v(_vm._s(_vm.item.user[0].remark||_vm.item.user[0].nickname))]),_c('div',{staticClass:\"desc-msg\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.item.quiet),expression:\"item.quiet\"}],staticClass:\"desc-mute iconfont icon-mute\"}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.item.type=='group'),expression:\"item.type=='group'\"}]},[_vm._v(_vm._s(_vm.item.msg[_vm.item.msg.length-1].name)+\":\")]),_c('span',[_vm._v(_vm._s(_vm.item.msg[_vm.item.msg.length-1].text))])])])]),_c('div',{staticClass:\"operate-box\"},[(_vm.read)?_c('div',{staticClass:\"operate-unread\",on:{\"click\":_vm.toggleMsgRead}},[_vm._v(\"标为未读\")]):_c('div',{staticClass:\"operate-read\",on:{\"click\":_vm.toggleMsgRead}},[_vm._v(\"标为已读\")]),_c('div',{staticClass:\"operate-del\",on:{\"click\":_vm.deleteMsgEvent}},[_vm._v(\"删除\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!--消息列表组件 数据交互频繁-->\n    <!--进入 dialogue 页面，携带参数 mid name group_num -->\n    <li :class=\"{'item-hide':deleteMsg}\">\n        <!--自定义指令 v-swiper 用于对每个消息进行滑动处理-->\n        <router-link\n            :to=\"{ path: '/wechat/dialogue', query: { mid: item.mid,name:item.group_name||(item.user[0].remark||item.user[0].nickname),group_num:item.user.length}}\"\n            tag=\"div\" class=\"list-info\" v-swiper v-on:click.native=\"toggleMsgRead($event,'enter')\">\n            <div class=\"header-box\">\n                <!--未读并且未屏蔽 才显示新信息数量-->\n                <i class=\"new-msg-count\" v-show=\"!read&&!item.quiet\">{{item.newMsgCount}}</i>\n                <!--未读并且屏蔽 只显示小红点-->\n                <i class=\"new-msg-dot\" v-show=\"!read&&item.quiet\"></i>\n                <!--如果是私聊，只显示一个头像； 如果是群聊，则显示多个头像，flex 控制样式-->\n                <div class=\"header\" :class=\"[item.type=='group'?'multi-header':'']\">\n                    <img v-for=\"(userInfo,index) in item.user\" :key=\"index\" :src=\"userInfo.headerUrl\">\n                </div>\n            </div>\n            <div class=\"desc-box\">\n                <!--使用过滤器 fmtDate 格式化时间-->\n                <div class=\"desc-time\" v-if=\"item.msg[item.msg.length-1].date1\">{{item.msg[item.msg.length-1].date1}}</div>\n                <div class=\"desc-time\" v-else>{{item.msg[item.msg.length-1].date | fmtDate('hh:ss')}}</div>\n                \n                <div class=\"desc-author\" v-if=\"item.type=='group'\">{{item.group_name}}</div>\n                <!--如果没有备注好友，则显示微信昵称-->\n                <div class=\"desc-author\" v-else>{{item.user[0].remark||item.user[0].nickname}}</div>\n                <div class=\"desc-msg\">\n                    <div class=\"desc-mute iconfont icon-mute\" v-show=\"item.quiet\">\n                    </div>\n                    <span v-show=\"item.type=='group'\">{{item.msg[item.msg.length-1].name}}:</span>\n                    <span>{{item.msg[item.msg.length-1].text}}</span>\n                </div>\n            </div>\n        </router-link>\n        <div class=\"operate-box\">\n            <div class=\"operate-unread\" v-if=\"read\" v-on:click=\"toggleMsgRead\">标为未读</div>\n            <div class=\"operate-read\" v-else v-on:click=\"toggleMsgRead\">标为已读</div>\n            <div class=\"operate-del\" v-on:click=\"deleteMsgEvent\">删除</div>\n        </div>\n    </li>\n</template>\n<script>\n    export default {\n        props: [\"item\"],\n        data() {\n            return {\n                read: this.item.read,\n                deleteMsg: false\n            }\n        },\n        methods: {\n            //切换消息未读/已读状态\n            toggleMsgRead(event, status) {\n                if (status === 'enter') {\n                    if (this.read) {\n                        return ''\n                    }\n                    this.read = true\n                } else {\n                    this.read = !this.read\n                }\n                if (!this.item.quiet) {\n                    if (this.read) {\n                        this.$store.commit('minusNewMsg')\n                    } else {\n                        this.$store.commit('addNewMsg')\n                    }\n                }\n\n                event.target.parentNode.parentNode.firstChild.style.marginLeft = 0 + \"px\"\n            },\n            deleteMsgEvent() {\n                this.deleteMsg = true\n                if (!this.item.quiet) {\n                    if (!this.read) {\n                        this.$store.commit('minusNewMsg')\n                    }\n                }\n            }\n        },\n        // 参考 https://vuefe.cn/v2/guide/custom-directive.html\n        directives: {\n            swiper: {\n                bind: function (element) {\n                    var isTouchMove, startTx, startTy\n                    element.addEventListener('touchstart', function (e) {\n                        var touches = e.touches[0]\n                        startTx = touches.clientX\n                        startTy = touches.clientY\n                        isTouchMove = false;\n                    });\n                    element.addEventListener('touchmove', function (e) {\n                        e.preventDefault();\n                        var touches = e.changedTouches[0],\n                            endTx = touches.clientX,\n                            endTy = touches.clientY,\n                            distanceX = startTx - endTx,\n                            distanceY = startTy - endTy;\n                        if (distanceX < 0) { //右滑\n                            if (Math.abs(distanceX) >= Math.abs(distanceY)) {\n                                if (Math.abs(distanceX) > 20) {\n                                    element.style.transition = \"0.3s\"\n                                    element.style.marginLeft = 0 + \"px\"\n                                }\n                            }\n                        } else { //左滑\n                            if (Math.abs(distanceX) >= Math.abs(distanceY)) {\n                                if (distanceX < 156 && distanceX > 20) {\n                                    element.style.transition = \"0s\"\n                                    element.style.marginLeft = -distanceX + \"px\"\n                                    isTouchMove = true\n                                }\n                            }\n                        }\n                    }, { passive: false });\n                    element.addEventListener('touchend', function (e) {\n                        if (!isTouchMove) {\n                            return;\n                        }\n                        var touches = e.changedTouches[0],\n                            endTx = touches.clientX,\n                            endTy = touches.clientY,\n                            distanceX = startTx - endTx,\n                            distanceY = startTy - endTy\n                        // isSwipe = false\n                        if (Math.abs(distanceX) >= Math.abs(distanceY)) {\n                            if (distanceX < 0) {\n                                return;\n                            }\n                            if (Math.abs(distanceX) < 60) {\n                                // isSwipe = true\n                                element.style.transition = \"0.3s\"\n                                element.style.marginLeft = 0 + \"px\"\n                            } else {\n                                element.style.transition = \"0.3s\"\n                                element.style.marginLeft = \"-156px\"\n                            }\n                        }\n                    });\n                }\n            }\n        }\n    }\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./msg-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./msg-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./msg-item.vue?vue&type=template&id=35ebd19e&\"\nimport script from \"./msg-item.vue?vue&type=script&lang=js&\"\nexport * from \"./msg-item.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <!--微信组件-->\n  <div id=\"wechat\">\n    <ul class=\"wechat-list\">\n        <!--props传递消息对象 baseMsgObj -->\n        <msg-item v-for=\"baseMsgObj in $store.state.msgList.baseMsg\" :item=\"baseMsgObj\" class=\"list-row line-bottom\" :key=\"baseMsgObj.mid\"></msg-item>\n    </ul>\n  </div>\n</template>\n<script>\n    import msgItem from \"../wechat/msg-item\"\n    export default {\n        components: {\n            msgItem\n        },\n        mixins: [window.mixin],\n        data() {\n            return {\n                \"pageName\": \"微信\"\n            }\n        }\n    }\n</script>\n<style lang=\"less\">\n    @import \"../../assets/less/wechat.less\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wechat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wechat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wechat.vue?vue&type=template&id=ddaec34a&\"\nimport script from \"./wechat.vue?vue&type=script&lang=js&\"\nexport * from \"./wechat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wechat.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}