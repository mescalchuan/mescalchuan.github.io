# 基础概念

### 命令式和声明式

* 命令式：关注过程，代码本身描述的是“做事的过程”，如 jQuery，代价是要维护整个过程
* 声明式：关注结果，将过程封装，代码本身产出的是“做事的结果”，如 Vue，虽然性能 >= 命令式，却减少了维护过程的成本

Vue 的内部实现是命令式的，而暴露给用户的是声明式

### 性能

* 命令式代码的更新性能消耗：直接修改的性能消耗
* 声明式代码的更新性能消耗：找出差异的性能消耗 + 直接修改的性能消耗

声明式代码的性能不优于命令式代码的性能

### 虚拟 DOM

Vue 在保持可维护性的同时让性能损失最小化

假设使用 innerHTML 替换整个 app 元素：
* innerHTML：重新构建 HTML 字符串，再重新设置 DOM 元素的 innerHTML 属性，相当于销毁所有旧的 DOM 元素，再全量创建新的 DOM 元素
* 虚拟 DOM：重新创建 js 对象（虚拟 DOM 树），比较新旧虚拟 DOM，找到变化的元素更新，得益于 js 的计算性能小于 DOM 计算性能
* 原生 js：直接更新要改变的 DOM，性能最高，代价是需要自己维护整个找出「要改变的 DOM」的过程

### 运行时和编译时

* 运行时 Render：将数据结构转换为 DOM 元素，`{ type: 'div', prop: {}, children: [] } => div(DOM)`，无法分析用户提供的内容
* 编译时 Compiler：将 HTML 标签直接编译成 DOM 元素，`div(template) => div(DOM)`，可以分析用户提供的内容，但不够灵活，必须编译后才能用
* 运行时 + 编译时：先将 HTML 编译成数据结构，再转换为 DOM 元素，`div(template) => { type: 'div', prop: {}, children: [] } => div(DOM)`，保持了灵活性和可分析性



