(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-690a575d"],{2934:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l}));var i=a("b775");function r(){return Object(i["a"])({url:"/api/v1/village/list",method:"post"})}function o(){return Object(i["a"])({url:"/api/v1/village/loadAll",method:"post"})}function s(){return Object(i["a"])({url:"/api/v1/position/query",method:"post"})}function l(e){return Object(i["a"])({url:"/api/v1/villageGroup/list",method:"post",data:e})}},8194:function(e,t,a){"use strict";a.d(t,"k",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"h",(function(){return n})),a.d(t,"j",(function(){return d})),a.d(t,"m",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"l",(function(){return p})),a.d(t,"i",(function(){return b})),a.d(t,"g",(function(){return v}));var i=a("b775");function r(e){return Object(i["a"])({url:"/api/v1/family/search",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/api/v1/family/save",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/api/v1/member/detail",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/api/v1/family/members",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/api/v1/member/detail",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/api/v1/relationship/query",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/api/v1/member/update",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/api/v1/member/cancel",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/api/v1/member/save",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/api/v1/birthDate/query",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/api/v1/members/search",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/api/v1/member/download",method:"get",params:e,responseType:"blob"})}function v(e){return Object(i["a"])({url:"/api/v1/updateHistory/query",method:"post",data:e})}},"8b03":function(e,t,a){},"8f02":function(e,t,a){"use strict";var i=a("8b03"),r=a.n(i);r.a},"94a6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"organization-page"},[a("back"),"new"===e.isEdit?a("area-selector",{attrs:{initFold:!0},on:{areaChange:e.areaChange}}):e._e(),a("div",{staticClass:"content"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,disabled:"detail"===e.isEdit,"label-width":"180px"}},["new"!==e.isEdit?a("el-form-item",{attrs:{label:"户号"}},["detail"!==e.isEdit?a("el-input",{attrs:{disabled:"disabled"},model:{value:e.familyCount,callback:function(t){e.familyCount=t},expression:"familyCount"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.familyCount))])],1):e._e(),a("el-form-item",{attrs:{label:"addMember"===e.isEdit||"editMember"===e.isEdit?"成员姓名":"户主姓名",prop:"name"}},["detail"!==e.isEdit?a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.name))])],1),"addMember"===e.isEdit||"editMember"===e.isEdit&&1!==e.form.relationship?a("el-form-item",{attrs:{label:"与户主关系",prop:"relationship"}},["detail"!==e.isEdit?a("el-select",{attrs:{filterable:"",placeholder:"请选择与户主关系"},model:{value:e.form.relationship,callback:function(t){e.$set(e.form,"relationship",t)},expression:"form.relationship"}},e._l(e.relationshipList.filter((function(t){return"addMember"===e.isEdit||"editMember"===e.isEdit?1===e.form.status?t:1!==t.relationshipId:t}))||[],(function(e){return a("el-option",{key:e.relationshipId,attrs:{label:e.relationshipName,value:e.relationshipId}})})),1):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.relationShip))])],1):e._e(),a("el-form-item",{attrs:{label:"性别"}},["detail"!==e.isEdit?a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:0}},[e._v("保密")]),a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:2}},[e._v("女")])],1):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.sexName))])],1),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},["detail"!==e.isEdit?a("el-input",{on:{blur:e.getBirthDay},model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard",t)},expression:"form.idCard"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.idCard))])],1),a("el-form-item",{attrs:{label:"出生日期",prop:"birthDate"}},["detail"!==e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.birthDate,callback:function(t){e.$set(e.form,"birthDate",t)},expression:"form.birthDate"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.birthDate))])],1),a("el-form-item",{attrs:{label:"职务",prop:"positionId"}},["detail"!==e.isEdit?a("el-select",{attrs:{filterable:"",placeholder:"请选择职务"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},e._l(e.posiitonList,(function(e){return a("el-option",{key:e.positionId,attrs:{label:e.positionName,value:e.positionId}})})),1):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.positionName))])],1),"new"===e.isEdit?a("el-form-item",{attrs:{label:"所在社/组",prop:"villageGroupId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择所在社/组"},model:{value:e.form.villageGroupId,callback:function(t){e.$set(e.form,"villageGroupId",t)},expression:"form.villageGroupId"}},e._l(e.groupOptions,(function(e){return a("el-option",{key:e.villageGroupId,attrs:{label:e.villageGroupName,value:e.villageGroupId}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"服务处所",prop:"servicePlace"}},["detail"!==e.isEdit?a("el-input",{model:{value:e.form.servicePlace,callback:function(t){e.$set(e.form,"servicePlace",t)},expression:"form.servicePlace"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.servicePlace))])],1),a("el-form-item",{attrs:{label:"现居住地址",prop:"currentAddress"}},["detail"!==e.isEdit?a("el-input",{model:{value:e.form.currentAddress,callback:function(t){e.$set(e.form,"currentAddress",t)},expression:"form.currentAddress"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.currentAddress))])],1),a("el-form-item",{attrs:{label:"有无承包地及获得时间",prop:"isHasLand"}},["detail"!==e.isEdit?a("el-radio-group",{model:{value:e.form.isHasLand,callback:function(t){e.$set(e.form,"isHasLand",t)},expression:"form.isHasLand"}},[a("el-radio",{attrs:{label:0}},[e._v("无")]),a("el-radio",{attrs:{label:1}},[e._v("有")])],1):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.isHasLand?"有":"无"))])],1),e.form.isHasLand?a("el-form-item",{attrs:{label:"承包地及获得时间",prop:"isHasLand"}},["detail"!==e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.getLandTime,callback:function(t){e.$set(e.form,"getLandTime",t)},expression:"form.getLandTime"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.getLandTime))])],1):e._e(),a("el-form-item",{attrs:{label:"户口迁入时间",prop:"accountInTime"}},["detail"!==e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.accountInTime,callback:function(t){e.$set(e.form,"accountInTime",t)},expression:"form.accountInTime"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.accountInTime))])],1),a("el-form-item",{attrs:{label:"户口迁入原因"}},["detail"!==e.isEdit?a("el-input",{model:{value:e.form.accountInReason,callback:function(t){e.$set(e.form,"accountInReason",t)},expression:"form.accountInReason"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.accountInReason))])],1),a("el-form-item",{attrs:{label:"户口迁出时间"}},["detail"!==e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.accountOutTime,callback:function(t){e.$set(e.form,"accountOutTime",t)},expression:"form.accountOutTime"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.accountOutTime))])],1),a("el-form-item",{attrs:{label:"户口迁出原因",prop:"accountOutReason"}},["detail"!==e.isEdit?a("el-input",{model:{value:e.form.accountOutReason,callback:function(t){e.$set(e.form,"accountOutReason",t)},expression:"form.accountOutReason"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.accountOutReason))])],1),a("el-form-item",{attrs:{label:"成员资格取得方式",prop:"obtainWay"}},["detail"!==e.isEdit?a("el-input",{attrs:{placeholder:"第几条第几款，如 1.1"},model:{value:e.form.obtainWay,callback:function(t){e.$set(e.form,"obtainWay",t)},expression:"form.obtainWay"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.obtainWay))])],1),"addMember"===e.isEdit||"editMember"===e.isEdit||"detail"==e.isEdit?a("el-form-item",{attrs:{label:"是否已确认",prop:"isConfirm"}},["detail"!==e.isEdit?a("el-radio-group",{model:{value:e.form.isConfirm,callback:function(t){e.$set(e.form,"isConfirm",t)},expression:"form.isConfirm"}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1):0===e.form.isConfirm||1===e.form.isConfirm?a("p",[e._v(e._s(0==e.form.isConfirm?"否":"是"))]):e._e()],1):e._e(),a("el-form-item",{attrs:{label:"备注",prop:"description"}},["detail"!==e.isEdit?a("el-input",{attrs:{type:"textarea",placeholder:"备注描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}):a("p",{staticClass:"disable-text"},[e._v(e._s(e.form.description))])],1)],1),"detail"!==e.isEdit?a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:"detail"===e.isEdit},on:{click:e.submit}},[e._v("提 交")]):e._e()],1)],1)},r=[],o=(a("b0c0"),a("5530")),s=a("7715"),l=a("66b7"),n=a("8194"),d=a("2934"),c={components:{AreaSelector:s["a"],Back:l["a"]},data:function(){return{form:{isConfirm:1},familyCount:"",formLabelWidth:"100px",groupOptions:[],relationshipList:[],rules:{name:[{required:!0,message:"请输入户主姓名",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{required:!0,message:"请输入正确的身份证号",trigger:"blur",pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/}],currentAddress:[{required:!0,message:"请输入居住地址",trigger:"blur"}],position:[{required:!0,message:"请选择职位",trigger:"change"}],villageGroupId:[{required:!0,message:"请选择组/社",trigger:"change"}],relationship:[{required:!0,message:"请选择与户主关系",trigger:"change"}],birthDate:[{required:!0,message:"请选择出生日期",trigger:"change"}],description:[{message:"请填写组织介绍",trigger:"blur"}],obtainWay:[{required:!0,message:"请填写成员资格取得方式"}]},isEdit:!1,areaList:[],posiitonList:[]}},watch:{areaList:{deep:!0,handler:function(){var e=this.areaList[1].value;this.getGroupList(e)}}},created:function(){this.isEdit=this.$route.query.isEdit,this.familyCount=this.$route.query.familyCount,this.getPositionList(),this.getRelationList(),"new"!==this.isEdit&&"addMember"!==this.isEdit&&this.getDetail()},methods:{areaChange:function(e){this.areaList=e,this.form.villageGroupId&&(this.form.villageGroupId="")},getBirthDay:function(){var e=this;if(this.form.idCard&&/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(this.form.idCard)){var t=new FormData;t.append("idCard",this.form.idCard),Object(n["f"])(t).then((function(t){var a=new Date(t.data.birthDate);e.form.birthDate=a,e.$forceUpdate()}))}},submit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var a=null,i=e.$route.query.id,r=e.$route.query.memberId;switch(e.form.isHasLand||delete e.form.getLandTime,e.isEdit){case"new":a=Object(n["c"])(e.form);break;case"edit":a=Object(n["m"])(e.form);break;case"addMember":var s=Object(o["a"])(Object(o["a"])({},e.form),{},{familyId:i});a=Object(n["a"])(s);break;case"editMember":var l=Object(o["a"])(Object(o["a"])({},e.form),{},{familyId:i,memberId:r});delete l.relationshipName,a=Object(n["m"])(l)}a.then((function(t){e.$message({message:"操作成功",type:"success"}),i&&"new"===e.isEdit?e.$router.push("/member/index"):history.back()}))}}))},getDetail:function(){var e=this,t=this.$route.query.id,a=this.$route.query.memberId,i=null;a?i=Object(n["h"])({memberId:a}):t&&(i=Object(n["d"])({memberId:t})),i.then((function(t){e.form=Object(o["a"])(Object(o["a"])({},t.data),{},{name:t.data.name||t.data.memberName}),t.data.villageId&&e.getGroupList(t.data.villageId)}))},newFamily:function(){},getPositionList:function(){var e=this;Object(d["d"])().then((function(t){e.posiitonList=t.data.positionInfos||[]}))},getGroupList:function(e){var t=this;Object(d["c"])({villageId:e}).then((function(e){t.groupOptions=e.data.villageGroupInfos||[]}))},getRelationList:function(e){var t=this;Object(n["j"])({villageId:e}).then((function(e){t.relationshipList=e.data.relationshipInfos||[]}))}}},u=c,m=(a("edf9"),a("8f02"),a("2877")),f=Object(m["a"])(u,i,r,!1,null,"6bd7b15c",null);t["default"]=f.exports},edf9:function(e,t,a){"use strict";var i=a("f22f"),r=a.n(i);r.a},f22f:function(e,t,a){}}]);