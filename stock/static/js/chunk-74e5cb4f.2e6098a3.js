(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74e5cb4f"],{2934:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return l}));var i=a("b775");function r(){return Object(i["a"])({url:"/v1/village/list",method:"post"})}function s(){return Object(i["a"])({url:"/v1/village/loadAll",method:"post"})}function o(){return Object(i["a"])({url:"/v1/position/query",method:"post"})}function l(t){return Object(i["a"])({url:"/v1/villageGroup/list",method:"post",data:t})}},4949:function(t,e,a){},8194:function(t,e,a){"use strict";a.d(e,"k",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"h",(function(){return n})),a.d(e,"j",(function(){return d})),a.d(e,"m",(function(){return c})),a.d(e,"b",(function(){return u})),a.d(e,"a",(function(){return m})),a.d(e,"f",(function(){return f})),a.d(e,"l",(function(){return p})),a.d(e,"i",(function(){return b})),a.d(e,"g",(function(){return h}));var i=a("b775");function r(t){return Object(i["a"])({url:"/v1/family/search",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/v1/family/save",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/v1/member/detail",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/v1/family/members",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/v1/member/detail",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/v1/relationship/query",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/v1/member/update",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/v1/member/cancel",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/v1/member/save",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/v1/birthDate/query",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/v1/members/search",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/v1/member/download",method:"get",params:t,responseType:"blob"})}function h(t){return Object(i["a"])({url:"/v1/updateHistory/query",method:"post",data:t})}},"8b03":function(t,e,a){},"8f02":function(t,e,a){"use strict";var i=a("8b03"),r=a.n(i);r.a},"94a6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organization-page"},[a("back"),"new"===t.isEdit?a("area-selector",{attrs:{initFold:!0},on:{areaChange:t.areaChange}}):t._e(),a("div",{staticClass:"content"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,disabled:"detail"===t.isEdit,"label-width":"180px"}},["new"!==t.isEdit?a("el-form-item",{attrs:{label:"户号"}},["detail"!==t.isEdit?a("el-input",{attrs:{disabled:"disabled"},model:{value:t.familyCount,callback:function(e){t.familyCount=e},expression:"familyCount"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.familyCount))])],1):t._e(),a("el-form-item",{attrs:{label:"addMember"===t.isEdit||"editMember"===t.isEdit?"成员姓名":"户主姓名",prop:"name"}},["detail"!==t.isEdit?a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.name))])],1),"addMember"===t.isEdit||"editMember"===t.isEdit&&1!==t.form.relationship?a("el-form-item",{attrs:{label:"与户主关系",prop:"relationship"}},["detail"!==t.isEdit?a("el-select",{attrs:{filterable:"",placeholder:"请选择与户主关系"},model:{value:t.form.relationship,callback:function(e){t.$set(t.form,"relationship",e)},expression:"form.relationship"}},t._l(t.relationshipList.filter((function(e){return"addMember"===t.isEdit||"editMember"===t.isEdit?1===t.form.status?e:1!==e.relationshipId:e}))||[],(function(t){return a("el-option",{key:t.relationshipId,attrs:{label:t.relationshipName,value:t.relationshipId}})})),1):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.relationShip))])],1):t._e(),a("el-form-item",{attrs:{label:"性别"}},["detail"!==t.isEdit?a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:0}},[t._v("保密")]),a("el-radio",{attrs:{label:1}},[t._v("男")]),a("el-radio",{attrs:{label:2}},[t._v("女")])],1):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.sexName))])],1),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},["detail"!==t.isEdit?a("el-input",{on:{blur:t.getBirthDay},model:{value:t.form.idCard,callback:function(e){t.$set(t.form,"idCard",e)},expression:"form.idCard"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.idCard))])],1),a("el-form-item",{attrs:{label:"出生日期",prop:"birthDate"}},["detail"!==t.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.form.birthDate,callback:function(e){t.$set(t.form,"birthDate",e)},expression:"form.birthDate"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.birthDate))])],1),a("el-form-item",{attrs:{label:"职务",prop:"positionId"}},["detail"!==t.isEdit?a("el-select",{attrs:{filterable:"",placeholder:"请选择职务"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}},t._l(t.posiitonList,(function(t){return a("el-option",{key:t.positionId,attrs:{label:t.positionName,value:t.positionId}})})),1):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.positionName))])],1),"new"===t.isEdit?a("el-form-item",{attrs:{label:"所在社/组",prop:"villageGroupId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择所在社/组"},model:{value:t.form.villageGroupId,callback:function(e){t.$set(t.form,"villageGroupId",e)},expression:"form.villageGroupId"}},t._l(t.groupOptions,(function(t){return a("el-option",{key:t.villageGroupId,attrs:{label:t.villageGroupName,value:t.villageGroupId}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"服务处所",prop:"servicePlace"}},["detail"!==t.isEdit?a("el-input",{model:{value:t.form.servicePlace,callback:function(e){t.$set(t.form,"servicePlace",e)},expression:"form.servicePlace"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.servicePlace))])],1),a("el-form-item",{attrs:{label:"现居住地址",prop:"currentAddress"}},["detail"!==t.isEdit?a("el-input",{model:{value:t.form.currentAddress,callback:function(e){t.$set(t.form,"currentAddress",e)},expression:"form.currentAddress"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.currentAddress))])],1),a("el-form-item",{attrs:{label:"有无承包地及获得时间",prop:"isHasLand"}},["detail"!==t.isEdit?a("el-radio-group",{model:{value:t.form.isHasLand,callback:function(e){t.$set(t.form,"isHasLand",e)},expression:"form.isHasLand"}},[a("el-radio",{attrs:{label:0}},[t._v("无")]),a("el-radio",{attrs:{label:1}},[t._v("有")])],1):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.isHasLand?"有":"无"))])],1),t.form.isHasLand?a("el-form-item",{attrs:{label:"承包地及获得时间",prop:"isHasLand"}},["detail"!==t.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.form.getLandTime,callback:function(e){t.$set(t.form,"getLandTime",e)},expression:"form.getLandTime"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.getLandTime))])],1):t._e(),a("el-form-item",{attrs:{label:"户口迁入时间",prop:"accountInTime"}},["detail"!==t.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.form.accountInTime,callback:function(e){t.$set(t.form,"accountInTime",e)},expression:"form.accountInTime"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.accountInTime))])],1),a("el-form-item",{attrs:{label:"户口迁入原因"}},["detail"!==t.isEdit?a("el-input",{model:{value:t.form.accountInReason,callback:function(e){t.$set(t.form,"accountInReason",e)},expression:"form.accountInReason"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.accountInReason))])],1),a("el-form-item",{attrs:{label:"户口迁出时间"}},["detail"!==t.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.form.accountOutTime,callback:function(e){t.$set(t.form,"accountOutTime",e)},expression:"form.accountOutTime"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.accountOutTime))])],1),a("el-form-item",{attrs:{label:"户口迁出原因",prop:"accountOutReason"}},["detail"!==t.isEdit?a("el-input",{model:{value:t.form.accountOutReason,callback:function(e){t.$set(t.form,"accountOutReason",e)},expression:"form.accountOutReason"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.accountOutReason))])],1),a("el-form-item",{attrs:{label:"备注",prop:"description"}},["detail"!==t.isEdit?a("el-input",{attrs:{type:"textarea",placeholder:"备注描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}):a("p",{staticClass:"disable-text"},[t._v(t._s(t.form.description))])],1)],1),"detail"!==t.isEdit?a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:"detail"===t.isEdit},on:{click:t.submit}},[t._v("提 交")]):t._e()],1)],1)},r=[],s=(a("b0c0"),a("5530")),o=a("7715"),l=a("66b7"),n=a("8194"),d=a("2934"),c={components:{AreaSelector:o["a"],Back:l["a"]},data:function(){return{form:{},familyCount:"",formLabelWidth:"100px",groupOptions:[],relationshipList:[],rules:{name:[{required:!0,message:"请输入户主姓名",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{required:!0,message:"请输入正确的身份证号",trigger:"blur",pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/}],currentAddress:[{required:!0,message:"请输入居住地址",trigger:"blur"}],position:[{required:!0,message:"请选择职位",trigger:"change"}],villageGroupId:[{required:!0,message:"请选择组/社",trigger:"change"}],relationship:[{required:!0,message:"请选择与户主关系",trigger:"change"}],birthDate:[{required:!0,message:"请选择出生日期",trigger:"change"}],description:[{message:"请填写组织介绍",trigger:"blur"}]},isEdit:!1,areaList:[],posiitonList:[]}},watch:{areaList:{deep:!0,handler:function(){var t=this.areaList[1].value;this.getGroupList(t)}}},created:function(){this.isEdit=this.$route.query.isEdit,this.familyCount=this.$route.query.familyCount,this.getPositionList(),this.getRelationList(),"new"!==this.isEdit&&"addMember"!==this.isEdit&&this.getDetail()},methods:{areaChange:function(t){this.areaList=t,this.form.villageGroupId&&(this.form.villageGroupId="")},getBirthDay:function(){var t=this;if(this.form.idCard&&/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(this.form.idCard)){var e=new FormData;e.append("idCard",this.form.idCard),Object(n["f"])(e).then((function(e){var a=new Date(e.data.birthDate);t.form.birthDate=a,t.$forceUpdate()}))}},submit:function(){var t=this,e=null,a=this.$route.query.id,i=this.$route.query.memberId;switch(this.form.isHasLand||delete this.form.getLandTime,this.isEdit){case"new":e=Object(n["c"])(this.form);break;case"edit":e=Object(n["m"])(this.form);break;case"addMember":var r=Object(s["a"])(Object(s["a"])({},this.form),{},{familyId:a});e=Object(n["a"])(r);break;case"editMember":var o=Object(s["a"])(Object(s["a"])({},this.form),{},{familyId:a,memberId:i});delete o.relationshipName,e=Object(n["m"])(o)}e.then((function(e){t.$message({message:"操作成功",type:"success"}),a&&"new"===t.isEdit?t.$router.push("/member/index"):history.back()}))},getDetail:function(){var t=this,e=this.$route.query.id,a=this.$route.query.memberId,i=null;a?i=Object(n["h"])({memberId:a}):e&&(i=Object(n["d"])({memberId:e})),i.then((function(e){t.form=Object(s["a"])(Object(s["a"])({},e.data),{},{name:e.data.name||e.data.memberName}),e.data.villageId&&t.getGroupList(e.data.villageId)}))},newFamily:function(){},getPositionList:function(){var t=this;Object(d["d"])().then((function(e){t.posiitonList=e.data.positionInfos||[]}))},getGroupList:function(t){var e=this;Object(d["c"])({villageId:t}).then((function(t){e.groupOptions=t.data.villageGroupInfos||[]}))},getRelationList:function(t){var e=this;Object(n["j"])({villageId:t}).then((function(t){e.relationshipList=t.data.relationshipInfos||[]}))}}},u=c,m=(a("a9db"),a("8f02"),a("2877")),f=Object(m["a"])(u,i,r,!1,null,"5b792dc3",null);e["default"]=f.exports},a9db:function(t,e,a){"use strict";var i=a("4949"),r=a.n(i);r.a}}]);