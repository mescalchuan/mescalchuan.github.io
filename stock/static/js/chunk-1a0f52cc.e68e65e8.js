(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a0f52cc"],{1799:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{overflow:"hidden"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":function(t){return e.$emit("on-change",t)},"size-change":function(t){return e.$emit("on-size-change",t)},"prev-click":function(t){return e.$emit("on-change",t)},"next-click":function(t){return e.$emit("on-change",t)}}})],1)},n=[],r=(a("a9e3"),{props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}}}),o=r,l=a("2877"),s=Object(l["a"])(o,i,n,!1,null,null,null);t["a"]=s.exports},2934:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return l}));var i=a("b775");function n(){return Object(i["a"])({url:"/v1/village/list",method:"post"})}function r(){return Object(i["a"])({url:"/v1/village/loadAll",method:"post"})}function o(){return Object(i["a"])({url:"/v1/position/query",method:"post"})}function l(e){return Object(i["a"])({url:"/v1/villageGroup/list",method:"post",data:e})}},"2b96":function(e,t,a){"use strict";var i=a("9ef6"),n=a.n(i);n.a},"3fbc":function(e,t,a){"use strict";var i=a("97c7"),n=a.n(i);n.a},5790:function(e,t,a){},"6cd7":function(e,t,a){"use strict";var i=a("5790"),n=a.n(i);n.a},7715:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("行政区域设置")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.isFold=!e.isFold}}},[e._v(e._s(e.isFold?"折叠":"展开"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isFold,expression:"isFold"}],staticClass:"area-box"},[a("p",{staticClass:"tag-title top"},[e._v("乡镇")]),e._l(e.areaList,(function(t){return a("el-tag",{key:"town"+t.townshipId,class:["tag-cursor",{active:e.activeTownIndex===t.townshipId}],attrs:{size:"mini","disable-transitions":!0,type:"info"},on:{click:function(a){return e.getTowns(t)}}},[e._v(e._s(t.townshipName)+" ")])})),e.hideVillage?e._e():a("p",{staticClass:"tag-title"},[e._v("村")]),e.hideVillage?e._e():a("span",e._l(e.currentTownList,(function(t){return a("el-tag",{key:"village"+t.villageId,class:["tag-cursor",{active:e.activeVillageIndex===t.villageId}],attrs:{size:"mini","disable-transitions":!0,type:"info"},on:{click:function(a){return e.selectTown(t)}}},[e._v(e._s(t.villageName)+" ")])})),1)],2)])},n=[],r=(a("d81d"),a("b0c0"),a("2934")),o={data:function(){return{isFold:!1,areaList:[],currentTownList:[],activeTownIndex:0,activeTownName:"",activeVillageIndex:0,activeVillageName:""}},props:{initFold:{type:Boolean,default:!0},hideVillage:{type:Boolean,default:!1}},created:function(){this.isFold=this.initFold;var e=localStorage.getItem("tv");e&&(e=JSON.parse(e),this.activeTownIndex=e[0].value,this.activeTownName=e[0].name,this.activeVillageIndex=e[1].value,this.activeVillageName=e[1].name),this.getVillageList(e)},methods:{goBack:function(){this.$router.go(-1)},getTowns:function(e){this.currentTownList=e&&e.villageInfos||[],this.init(e),this.areaChange()},selectTown:function(e){this.activeVillageIndex=e.villageId,this.activeVillageName=e.villageName,this.areaChange(),console.log(this.activeVillageIndex)},getVillageList:function(e){var t=this;Object(r["b"])().then((function(a){t.areaList=a.data.townshipInfos||[];var i=0;e&&t.areaList.map((function(e,a){e.townshipId===t.activeTownIndex&&(i=a)})),t.init(t.areaList[i],e),t.areaChange()}))},areaChange:function(e){var t=[{name:this.activeTownName,value:this.activeTownIndex},{name:this.activeVillageName,value:this.activeVillageIndex}];localStorage.setItem("tv",JSON.stringify(t)),this.$emit("areaChange",t)},init:function(e,t){var a=this;this.activeTownIndex=e.townshipId,this.currentTownList=e&&e.villageInfos||[];var i=0;t&&this.currentTownList.map((function(e,t){e.villageId===a.activeVillageIndex&&(i=t)})),this.activeVillageIndex=this.currentTownList[i].villageId,this.activeTownName=e.townshipName,this.activeVillageName=this.currentTownList[i].villageName}}},l=o,s=(a("b3f5"),a("2b96"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"28a8671b",null);t["a"]=c.exports},"97c7":function(e,t,a){},"9ef6":function(e,t,a){},a9e3:function(e,t,a){"use strict";var i=a("83ab"),n=a("da84"),r=a("94ca"),o=a("6eeb"),l=a("5135"),s=a("c6b6"),c=a("7156"),u=a("c04e"),g=a("d039"),d=a("7c73"),h=a("241c").f,f=a("06cf").f,p=a("9bf2").f,v=a("58a8").trim,m="Number",b=n[m],I=b.prototype,w=s(d(I))==m,N=function(e){var t,a,i,n,r,o,l,s,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+c}for(r=c.slice(2),o=r.length,l=0;l<o;l++)if(s=r.charCodeAt(l),s<48||s>n)return NaN;return parseInt(r,i)}return+c};if(r(m,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var y,_=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof _&&(w?g((function(){I.valueOf.call(a)})):s(a)!=m)?c(new b(N(t)),a,_):N(t)},x=i?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;x.length>T;T++)l(b,y=x[T])&&!l(_,y)&&p(_,y,f(b,y));_.prototype=I,I.constructor=_,o(n,m,_)}},b3f5:function(e,t,a){"use strict";var i=a("e96c"),n=a.n(i);n.a},e96c:function(e,t,a){},f52b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"organization-page"},[a("area-selector",{on:{areaChange:e.areaChange}}),a("div",{staticClass:"content"},[a("div",{staticClass:"option-box"},[a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"组织代码、组织名称、法人信息输入",clearable:""},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v(" 搜索 "),a("i",{staticClass:"el-icon-search el-icon--right"})])],1),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(){return e.handleEdit()}}},[e._v("添加经济组织")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-class-name":"table-header-color",data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号",width:"180"}}),a("el-table-column",{attrs:{prop:"groupCode",label:"组织代码"}}),a("el-table-column",{attrs:{prop:"groupName",label:"组织名称"}}),a("el-table-column",{attrs:{prop:"groupDescription",label:"法人代表"}}),a("el-table-column",{attrs:{prop:"establishTime",label:"成立日期"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-s-tools",type:"success",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("变更")]),a("el-button",{attrs:{icon:"el-icon-warning",type:"warning",size:"small"},on:{click:e.goDetail}},[e._v("详情")])]}}])})],1),a("pagination",{attrs:{total:e.pageInfo.total,"current-page":e.pageInfo.pageNum},on:{"on-change":function(t){return e.handlePageChange(t)}}})],1)],1)},n=[],r=(a("99af"),a("7715")),o=a("1799"),l=a("2934"),s=a("cca8"),c={components:{AreaSelector:r["a"],Pagination:o["a"]},data:function(){return{searchKey:"",form:{},formLabelWidth:"100px",dialogFormVisible:!1,rules:{code:[{required:!0,message:"请输入组织代码",trigger:"blur"}],name:[{required:!0,message:"请输入组织名称",trigger:"blur"}],represent:[{required:!0,message:"请输入法人代表",trigger:"blur"}],createdDate:[{type:"date",message:"请选择成立日期",trigger:"change"}],desc:[{message:"请填写组织介绍",trigger:"blur"}]},groupOptions:[],areaList:[],isEdit:!1,pageInfo:{pageNum:1,pageSize:10,total:0,current:1},tableData:[]}},computed:{villageId:function(){return console.log(this.villageId),this.villageId}},created:function(){},methods:{showDialog:function(){this.isEdit=!1,this.resetForm(),this.dialogFormVisible=!this.dialogFormVisible},handleEdit:function(e){if(console.log(e),e){for(var t in this.form)this.form[t]=e[t];this.isEdit=!0,this.$router.push("/organ/edit?isEdit=".concat(this.isEdit,"&id=").concat(e&&e.id))}else this.$router.push("/organ/edit")},goDetail:function(){this.$router.push("/organ/detail")},areaChange:function(e){console.log(e),this.areaList=e,this.form.villageGroupId=e[1].value,this.handleSearch()},handleSearch:function(){var e=this;Object(s["a"])({keyword:this.searchKey,villageId:this.form.villageGroupId,pageNum:this.pageInfo.pageNum}).then((function(t){if(t&&0===t.status){var a=t.data;a&&(e.tableData=a.economicGroupInfos,e.pageInfo.total=t.total)}}))},handlePageChange:function(e){this.pageInfo.pageNum=e,this.handleSearch()},getGroupList:function(e){var t=this;Object(l["c"])({villageId:e}).then((function(e){t.groupOptions=e.data.villageGroupInfos||[]}))}}},u=c,g=(a("3fbc"),a("6cd7"),a("2877")),d=Object(g["a"])(u,i,n,!1,null,"ab091e36",null);t["default"]=d.exports}}]);