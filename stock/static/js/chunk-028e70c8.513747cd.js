(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-028e70c8"],{"1ad6":function(t,e,a){},"1e8b":function(t,e,a){},3277:function(t,e,a){"use strict";var r=a("1e8b"),n=a.n(r);n.a},"4ad1":function(t,e,a){},"4b94":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-page"},[a("back"),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.basicInfo.address)+" 户 "+t._s(t.basicInfo.familyNo)+" ("+t._s(t.basicInfo.name)+") "),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.addMember}},[t._v("新增家庭成员")])],1),a("div",{staticStyle:{padding:"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-class-name":"table-header-color",data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"memberName",label:"成员"}}),a("el-table-column",{attrs:{prop:"relationship",label:"与户主关系"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.relationshipList.length?a("p",[t._v(t._s(t.relationshipList.filter((function(t){return t.relationshipId==e.row.relationship}))[0].relationshipName))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.sex?a("p",[t._v("保密")]):1==e.row.sex?a("p",[t._v("男")]):2==e.row.sex?a("p",[t._v("女")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"idCard",label:"身份证号",width:"230"}}),a("el-table-column",{attrs:{prop:"birthDate",label:"出生日期"}}),a("el-table-column",{attrs:{prop:"currentAddress",label:"现居住地"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-s-tools",type:"success"},on:{click:function(a){return t.handleEdit("editMember",e.row.memberId)}}},[t._v("变更")]),a("el-button",{attrs:{icon:"el-icon-warning",type:"warning"},on:{click:function(a){return t.handleEdit("detail",e.row.memberId)}}},[t._v("详情")]),a("el-button",{attrs:{icon:"el-icon-delete-solid",type:"danger",size:"small"},on:{click:function(a){return t.deleteMember(e.row)}}},[t._v("注销")])]}}])})],1)],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.basicInfo.address)+" 户 "+t._s(t.basicInfo.familyNo)+" ("+t._s(t.basicInfo.name)+") "),a("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("变更记录")])],1),a("div",{staticStyle:{padding:"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-class-name":"table-header-color",data:t.memberUpdateHistoryInfos,border:""}},[a("el-table-column",{attrs:{prop:"updateTime",label:"变更时间"}}),a("el-table-column",{attrs:{prop:"memberName",label:"成员名"}}),a("el-table-column",{attrs:{prop:"updateDetail",label:"变更详情"}})],1)],1)]),a("el-dialog",{attrs:{title:"关系变更",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px"}},t._l(t.tableData,(function(e,r){return a("el-form-item",{key:e.memberId,attrs:{label:e.memberName}},[a("el-select",{attrs:{filterable:"",placeholder:"更新关系"},model:{value:t.form[r],callback:function(e){t.$set(t.form,r,e)},expression:"form[index]"}},t._l(t.relationshipList,(function(t){return a("el-option",{key:t.relationshipId,attrs:{label:t.relationshipName,value:t.relationshipId}})})),1)],1)})),1),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)},n=[],i=(a("99af"),a("4de4"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("d130")),o=a("66b7"),s=a("8194"),l={name:"OrganizationDetail",components:{FormItemLayout:i["a"],Back:o["a"]},data:function(){return{tableData:[{index:1,code:12,name:"zhanah",represent:"sdasas",address:"lallallal",createdDate:"2018-09-29"}],basicInfo:{},assetData:[{totlaAsset:78999999,shareHolder:222,stockTotal:56454,stockTotalPrice:56454,groupStockCount:4343,groupStockPrice:6343,perStockPrice:322}],stockRightData:[{type:"贡献股",price:"1.0"},{type:"贡献股",price:"1.0"},{type:"爱新股",price:"1.0"}],form:{total:1222,distribute:[{type:"",coefficient:1}]},typeList:[{label:"kakkak",value:"ssss"}],dialogVisible:!1,relationshipList:[],currentId:""}},created:function(){var t=this;this.basicInfo={address:this.$route.query.village,name:this.$route.query.name,familyNo:this.$route.query.familyNo},this.getFamilyMember(),this.getRelationList();var e=new FormData;e.append("familyId",this.$route.query.id),Object(s["g"])(e).then((function(e){console.log(e.data.memberUpdateHistoryInfos),t.memberUpdateHistoryInfos=e.data.memberUpdateHistoryInfos}))},methods:{handleEdit:function(t,e){if("detail"==t)this.$router.push("/member/edit?isEdit=".concat(t,"&memberId=").concat(e,"&familyCount=").concat(this.basicInfo.familyNo));else{var a=this.$route.query.id;this.$router.push("/member/edit?isEdit=".concat(t,"&id=").concat(a,"&memberId=").concat(e,"&familyCount=").concat(this.basicInfo.familyNo))}},addMember:function(){var t=this.$route.query.id;this.$router.push("/member/edit?isEdit=addMember&id=".concat(t,"&familyCount=").concat(this.basicInfo.familyNo))},goDetail:function(){this.$router.push("/member/detail")},deleteMember:function(t){var e=this;this.$confirm("确认注销？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.memberId;1===t.relationship&&e.tableData.length>1?(e.dialogVisible=!0,e.currentId=a):e.cancleMember(a)}))},cancleMember:function(t,e){var a=this,r={memberId:t};e&&(r.memberRelationships=e,r.memberId=this.currentId),Object(s["b"])(r).then((function(t){a.$message({type:"success",message:"操作成功！"}),a.dialogVisible=!1,a.getFamilyMember()}))},makeSureCancle:function(t){var e=this;console.log(this.form);var a=Object.keys(this.form).filter((function(t){return!isNaN(Number(t))}));console.log(a);var r=this.tableData.map((function(t){return t.memberId})),n=a.map((function(t){return{memberId:r[t],relationship:e.form[t]}}));this.cancleMember(t,n)},getFamilyMember:function(){var t=this,e=this.$route.query.id;Object(s["e"])({familyId:e}).then((function(e){t.tableData=e.data.memberInfos}))},getRelationList:function(t){var e=this;Object(s["j"])({villageId:t}).then((function(t){e.relationshipList=t.data.relationshipInfos||[]}))}}},c=l,u=(a("547a"),a("6c6f"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"64ae4ec1",null);e["default"]=d.exports},"547a":function(t,e,a){"use strict";var r=a("1ad6"),n=a.n(r);n.a},"66b7":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"back-container"},[a("span",{staticClass:"custom-back",on:{click:t.goBack}},[a("i",{staticClass:"el-icon-back ",on:{click:t.goBack}}),t._v("返回 ")])])},n=[],i=(a("2f62"),{name:"Back",methods:{goBack:function(){history.back()}}}),o=i,s=(a("8ccd"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"1a422e96",null);e["a"]=l.exports},"6c6f":function(t,e,a){"use strict";var r=a("9352"),n=a.n(r);n.a},8194:function(t,e,a){"use strict";a.d(e,"k",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return s})),a.d(e,"h",(function(){return l})),a.d(e,"j",(function(){return c})),a.d(e,"m",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"a",(function(){return m})),a.d(e,"f",(function(){return b})),a.d(e,"l",(function(){return f})),a.d(e,"i",(function(){return p})),a.d(e,"g",(function(){return h}));var r=a("b775");function n(t){return Object(r["a"])({url:"/v1/family/search",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/v1/family/save",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/v1/member/detail",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/v1/family/members",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/v1/member/detail",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/v1/relationship/query",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/v1/member/update",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/v1/member/cancel",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/v1/member/save",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/v1/birthDate/query",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/v1/members/search",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/v1/member/download",method:"get",params:t,responseType:"blob"})}function h(t){return Object(r["a"])({url:"/v1/updateHistory/query",method:"post",data:t})}},"8ccd":function(t,e,a){"use strict";var r=a("4ad1"),n=a.n(r);n.a},9352:function(t,e,a){},a9e3:function(t,e,a){"use strict";var r=a("83ab"),n=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),m=a("7c73"),b=a("241c").f,f=a("06cf").f,p=a("9bf2").f,h=a("58a8").trim,v="Number",y=n[v],I=y.prototype,g=l(m(I))==v,_=function(t){var e,a,r,n,i,o,s,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=h(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(i=c.slice(2),o=i.length,s=0;s<o;s++)if(l=i.charCodeAt(s),l<48||l>n)return NaN;return parseInt(i,r)}return+c};if(i(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var k,N=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof N&&(g?d((function(){I.valueOf.call(a)})):l(a)!=v)?c(new y(_(e)),a,N):_(e)},w=r?b(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;w.length>O;O++)s(y,k=w[O])&&!s(N,k)&&p(N,k,f(y,k));N.prototype=I,I.constructor=N,o(n,v,N)}},d130:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-item-box"},[a("span",{style:{display:"inline-block",width:t.labelWidth+"px"}},[t.required?a("span",{staticStyle:{color:"#f56c6c"}},[t._v("*")]):t._e(),t._v(" "+t._s(t.label)+" ")]),t._t("default")],2)},n=[],i=(a("a9e3"),a("2f62"),{name:"Dashboard",props:{label:String,labelWidth:{type:Number,default:100},required:Boolean}}),o=i,s=(a("3277"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"0679a4c4",null);e["a"]=l.exports}}]);