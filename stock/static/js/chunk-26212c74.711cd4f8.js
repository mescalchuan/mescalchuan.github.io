(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26212c74"],{"13b0":function(t,e,i){t.exports=i.p+"static/img/farmer_import_demo.f55503c3.png"},"24c5":function(t,e,i){"use strict";var a=i("ee3b"),n=i.n(a);n.a},2934:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return s})),i.d(e,"d",(function(){return o})),i.d(e,"c",(function(){return l}));var a=i("b775");function n(){return Object(a["a"])({url:"/v1/village/list",method:"post"})}function s(){return Object(a["a"])({url:"/v1/village/loadAll",method:"post"})}function o(){return Object(a["a"])({url:"/v1/position/query",method:"post"})}function l(t){return Object(a["a"])({url:"/v1/villageGroup/list",method:"post",data:t})}},"2b96":function(t,e,i){"use strict";var a=i("9ef6"),n=i.n(a);n.a},7715:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("行政区域设置")]),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.isFold=!t.isFold}}},[t._v(t._s(t.isFold?"展开":"折叠"))])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFold,expression:"isFold"}],staticClass:"area-box"},[i("p",{staticClass:"tag-title top"},[t._v("乡镇")]),t._l(t.areaList,(function(e){return i("el-tag",{key:"town"+e.townshipId,class:["tag-cursor",{active:t.activeTownIndex===e.townshipId}],attrs:{size:"mini","disable-transitions":!0,type:"info"},on:{click:function(i){return t.getTowns(e)}}},[t._v(t._s(e.townshipName)+" ")])})),i("p",{staticClass:"tag-title"},[t._v("村")]),t._l(t.currentTownList,(function(e){return i("el-tag",{key:"village"+e.villageId,class:["tag-cursor",{active:t.activeVillageIndex===e.villageId}],attrs:{size:"mini","disable-transitions":!0,type:"info"},on:{click:function(i){return t.selectTown(e)}}},[t._v(t._s(e.villageName)+" ")])}))],2)])},n=[],s=(i("d81d"),i("b0c0"),i("2934")),o={data:function(){return{isFold:!1,areaList:[],currentTownList:[],activeTownIndex:0,activeTownName:"",activeVillageIndex:0,activeVillageName:""}},props:{initFold:{type:Boolean,default:!0}},created:function(){this.isFold=this.initFold;var t=localStorage.getItem("tv");t&&(t=JSON.parse(t),this.activeTownIndex=t[0].value,this.activeTownName=t[0].name,this.activeVillageIndex=t[1].value,this.activeVillageName=t[1].name),this.getVillageList(t)},methods:{goBack:function(){this.$router.go(-1)},getTowns:function(t){this.currentTownList=t&&t.villageInfos||[],this.init(t),this.areaChange()},selectTown:function(t){this.activeVillageIndex=t.villageId,this.activeVillageName=t.villageName,this.areaChange(),console.log(this.activeVillageIndex)},getVillageList:function(t){var e=this;Object(s["b"])().then((function(i){e.areaList=i.data.townshipInfos||[];var a=0;t&&e.areaList.map((function(t,i){t.townshipId===e.activeTownIndex&&(a=i)})),e.init(e.areaList[a],t),e.areaChange()}))},areaChange:function(t){var e=[{name:this.activeTownName,value:this.activeTownIndex},{name:this.activeVillageName,value:this.activeVillageIndex}];localStorage.setItem("tv",JSON.stringify(e)),this.$emit("areaChange",e)},init:function(t,e){var i=this;this.activeTownIndex=t.townshipId,this.currentTownList=t&&t.villageInfos||[];var a=0;e&&this.currentTownList.map((function(t,e){t.villageId===i.activeVillageIndex&&(a=e)})),this.activeVillageIndex=this.currentTownList[a].villageId,this.activeTownName=t.townshipName,this.activeVillageName=this.currentTownList[a].villageName}}},l=o,r=(i("24c5"),i("2b96"),i("2877")),c=Object(r["a"])(l,a,n,!1,null,"b8e850f8",null);e["a"]=c.exports},"83f3":function(t,e,i){"use strict";var a=i("f764"),n=i.n(a);n.a},"9ef6":function(t,e,i){},ee3b:function(t,e,i){},f3f8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organization-page"},[a("area-selector",{on:{areaChange:t.areaChange}}),a("div",{staticClass:"content"},[a("div",[a("input",{ref:"file",attrs:{type:"file"}})]),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.upload}},[t._v("上传"),a("i",{staticClass:"el-icon-upload el-icon--right"})]),a("el-divider"),a("div",[a("h3",[t._v("导入数据表结构说明：")]),a("p",[t._v("1、批量导入农户信息的表结构必须如下图")]),a("p",[t._v("2、导入前请确保户主信息为该户的第一行")]),a("p",[t._v("3、保证农户的身份证是合法的格式，否则导入不成功")]),a("img",{staticStyle:{width:"100%"},attrs:{src:i("13b0"),alt:""}})])],1)],1)},n=[],s=(i("b0c0"),i("7715")),o=i("b775");function l(t){return Object(o["a"])({url:"/v1/member/import",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}var r={components:{AreaSelector:s["a"]},data:function(){return{form:{}}},methods:{areaChange:function(t){console.log(t),this.areaList=t,this.form.villageGroupId=t[1].value},upload:function(){var t=this;console.log(this.$refs),console.log(this.$refs.file.files),this.$refs.file.files.length?this.$confirm("当前即将导入".concat(this.areaList[1].name,"农户信息"),"系统提示",{confirmButtonText:"确认上传",cancelButtonText:"取消"}).then((function(e){var i=new FormData;i.append("file",t.$refs.file.files[0]),i.append("villageId",t.areaList[1].value);var a=t.$message({message:"正在上传...",duration:0});l(i).then((function(e){a.close(),t.$message({message:"操作成功",type:"success"})})).catch((function(t){a.close()}))})).catch((function(){})):this.$message({type:"warning",message:"请选择文件"})}}},c=r,u=(i("83f3"),i("2877")),v=Object(u["a"])(c,a,n,!1,null,null,null);e["default"]=v.exports},f764:function(t,e,i){}}]);